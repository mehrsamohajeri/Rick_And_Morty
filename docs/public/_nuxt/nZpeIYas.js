import{_ as M,a as V}from"./DIwaT7Zo.js";import{_ as q}from"./CeygIHyI.js";import{_ as A}from"./BuVn0MDJ.js";import{e as y,o as n,f,w as B,a as c,b as F,t as b,n as k,u as d,g as h,c as g,F as x,r as $,h as R,i as j,j as z,k as D}from"./DAraDU9o.js";import{u as E,a as S}from"./CEF5p5n3.js";const T={class:"aspect-square overflow-hidden p-3"},U={class:"p-4"},I={class:"font-semibold text-lg text-white truncate"},W={class:"flex items-center gap-2 mt-2"},G={class:"text-sm text-white truncate capitalize"},H=y({__name:"CharacterCard",props:{character:{}},setup(e){const o=e,i=h(()=>{const r=(o.character?.status||"").toLowerCase();return r==="alive"?"bg-status-alive":r==="dead"?"bg-status-dead":"bg-status-unknown"});return(r,a)=>{const t=q,s=A;return n(),f(s,{to:`/character/${e.character.id}`,class:"block rounded-[16px] overflow-hidden border border-dark-400 hover:border-primary/50 transition-all duration-200 hover:shadow-lg hover:shadow-primary/10"},{default:B(()=>[c("div",T,[F(t,{src:e.character.image,alt:e.character.name,"container-class":"w-full h-full","img-class":"w-full h-full object-cover",loading:"lazy"},null,8,["src","alt"])]),c("div",U,[c("h3",I,b(e.character.name),1),c("div",W,[c("span",{class:k(["w-2 h-2 rounded-full flex-shrink-0",d(i)])},null,2),c("span",G,b(e.character.status)+"-"+b(e.character.species),1)])])]),_:1},8,["to"])}}}),J={class:"flex items-center justify-center gap-1 flex-wrap mt-8"},K=["disabled"],O=["disabled"],Q=["onClick"],X={key:1,class:"px-2 text-gray-500"},Y=["disabled"],Z=["disabled"],ee=y({__name:"Pagination",props:{currentPage:{},totalPages:{},maxVisible:{}},emits:["update:page"],setup(e){const o=e,i=h(()=>{const{currentPage:r,totalPages:a}=o,t=o.maxVisible??5,s=[];if(a<=t){for(let u=1;u<=a;u++)s.push(u);return s}const m=Math.floor(t/2);let l=Math.max(1,r-m),p=Math.min(a,l+t-1);p-l+1<t&&(l=Math.max(1,p-t+1)),l>1&&(s.push(1),l>2&&s.push("..."));for(let u=l;u<=p;u++)s.push(u);return p<a&&(p<a-1&&s.push("..."),s.push(a)),s});return(r,a)=>(n(),g("div",J,[c("button",{disabled:e.currentPage<=1,onClick:a[0]||(a[0]=t=>r.$emit("update:page",1)),class:"px-3 py-2 rounded text-gray-400 hover:bg-dark-500 disabled:opacity-40 disabled:cursor-not-allowed transition-colors","aria-label":"First page"}," « ",8,K),c("button",{disabled:e.currentPage<=1,onClick:a[1]||(a[1]=t=>r.$emit("update:page",e.currentPage-1)),class:"px-3 py-2 rounded text-gray-400 hover:bg-dark-500 disabled:opacity-40 disabled:cursor-not-allowed transition-colors","aria-label":"Previous page"}," ‹ ",8,O),(n(!0),g(x,null,$(d(i),(t,s)=>(n(),g(x,{key:`${t}-${s}`},[t!=="..."?(n(),g("button",{key:0,onClick:m=>r.$emit("update:page",t),class:k(["rounded font-medium transition-colors min-w-[25px]",t===e.currentPage?"bg-primary rounded-full text-dark-900":"text-gray-400 hover:bg-dark-500 hover:text-white"])},b(t),11,Q)):(n(),g("span",X,"..."))],64))),128)),c("button",{disabled:e.currentPage>=e.totalPages,onClick:a[2]||(a[2]=t=>r.$emit("update:page",e.currentPage+1)),class:"px-3 py-2 rounded text-gray-400 hover:bg-dark-500 disabled:opacity-40 disabled:cursor-not-allowed transition-colors","aria-label":"Next page"}," › ",8,Y),c("button",{disabled:e.currentPage>=e.totalPages,onClick:a[3]||(a[3]=t=>r.$emit("update:page",e.totalPages)),class:"px-3 py-2 rounded text-gray-400 hover:bg-dark-500 disabled:opacity-40 disabled:cursor-not-allowed transition-colors","aria-label":"Last page"}," » ",8,Z)]))}}),te={class:"grid grid-cols-1 sm:grid-cols-3 lg:grid-cols-4 gap-6 pt-12"},ae=y({__name:"CharacterList",props:{characters:{},info:{},currentPage:{}},emits:["update:page"],setup(e){return(o,i)=>{const r=H,a=ee;return n(),g("div",null,[c("div",te,[(n(!0),g(x,null,$(e.characters,t=>(n(),f(r,{key:t.id,character:t},null,8,["character"]))),128))]),e.info.pages>1?(n(),f(a,{key:0,"current-page":e.currentPage,"total-pages":e.info.pages,"onUpdate:page":i[0]||(i[0]=t=>o.$emit("update:page",t))},null,8,["current-page","total-pages"])):R("",!0)])}}}),le=y({__name:"index",async setup(e){let o,i;const r=j(),a=z(),{getCharacters:t}=E(),s=h(()=>Number(r.query.page)||1),m=h(()=>r.query.name||""),{data:l,pending:p,error:u}=([o,i]=D(()=>S(()=>`characters-${s.value}-${m.value}`,()=>t(s.value,m.value),{watch:[s,m]})),o=await o,i(),o),_=h(()=>l.value?.results??[]),w=h(()=>l.value?.info??{count:0,pages:0,next:null,prev:null}),P=v=>{a.push({path:"/",query:{...r.query,page:v>1?v:void 0}})};return(v,re)=>{const C=M,L=V,N=ae;return n(),g("div",null,[d(p)?(n(),f(C,{key:0})):d(u)||d(_).length===0&&d(m)?(n(),f(L,{key:1,message:"No characters found. Try a different search."})):(n(),f(N,{key:2,characters:d(_),info:d(w),"current-page":d(s),"onUpdate:page":P},null,8,["characters","info","current-page"]))])}}});export{le as default};
