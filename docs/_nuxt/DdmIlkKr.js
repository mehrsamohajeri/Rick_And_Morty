import{_ as M,a as V}from"./BpmwEdEt.js";import{_ as q}from"./CtHwBPFu.js";import{_ as F}from"./uMypC5dP.js";import{e as y,o as n,f as h,w as A,a as c,b as B,t as b,n as $,u,g as f,c as g,F as x,r as w,h as R,i as j,j as z,k as D}from"./BBhg-3u2.js";import{u as E,a as S}from"./DM9AZ-Ac.js";const T={class:"aspect-square overflow-hidden p-3"},U={class:"p-4"},I={class:"font-semibold text-lg text-white truncate"},W={class:"flex items-center gap-2 mt-2"},G={class:"text-sm text-white truncate capitalize"},H=y({__name:"CharacterCard",props:{character:{}},setup(e){const o=e,i=f(()=>{const s=(o.character?.status||"").toLowerCase();return s==="alive"?"bg-status-alive":s==="dead"?"bg-status-dead":"bg-status-unknown"});return(s,a)=>{const t=q,r=F;return n(),h(r,{to:`/character/${e.character.id}`,class:"block rounded-[16px] overflow-hidden border border-dark-400 hover:border-primary/50 transition-all duration-200 hover:shadow-lg hover:shadow-primary/10"},{default:A(()=>[c("div",T,[B(t,{src:e.character.image,alt:e.character.name,"container-class":"w-full h-full","img-class":"w-full h-full object-cover",loading:"lazy"},null,8,["src","alt"])]),c("div",U,[c("h3",I,b(e.character.name),1),c("div",W,[c("span",{class:$(["w-2 h-2 rounded-full flex-shrink-0",u(i)])},null,2),c("span",G,b(e.character.status)+"-"+b(e.character.species),1)])])]),_:1},8,["to"])}}}),J={class:"flex items-center justify-center gap-1 flex-wrap mt-8"},K=["disabled"],O=["disabled"],Q=["onClick"],X={key:1,class:"px-2 text-gray-500"},Y=["disabled"],Z=["disabled"],ee=y({__name:"Pagination",props:{currentPage:{},totalPages:{},maxVisible:{}},emits:["update:page"],setup(e){const o=e,i=f(()=>{const{currentPage:s,totalPages:a}=o,t=o.maxVisible??5,r=[];if(a<=t){for(let d=1;d<=a;d++)r.push(d);return r}const m=Math.floor(t/2);let l=Math.max(1,s-m),p=Math.min(a,l+t-1);p-l+1<t&&(l=Math.max(1,p-t+1)),l>1&&(r.push(1),l>2&&r.push("..."));for(let d=l;d<=p;d++)r.push(d);return p<a&&(p<a-1&&r.push("..."),r.push(a)),r});return(s,a)=>(n(),g("div",J,[c("button",{disabled:e.currentPage<=1,onClick:a[0]||(a[0]=t=>s.$emit("update:page",1)),class:"px-3 py-2 rounded text-gray-400 hover:bg-dark-500 disabled:opacity-40 disabled:cursor-not-allowed transition-colors","aria-label":"First page"}," « ",8,K),c("button",{disabled:e.currentPage<=1,onClick:a[1]||(a[1]=t=>s.$emit("update:page",e.currentPage-1)),class:"px-3 py-2 rounded text-gray-400 hover:bg-dark-500 disabled:opacity-40 disabled:cursor-not-allowed transition-colors","aria-label":"Previous page"}," ‹ ",8,O),(n(!0),g(x,null,w(u(i),(t,r)=>(n(),g(x,{key:`${t}-${r}`},[t!=="..."?(n(),g("button",{key:0,onClick:m=>s.$emit("update:page",t),class:$(["rounded font-medium transition-colors min-w-[25px]",t===e.currentPage?"bg-primary rounded-full text-dark-900":"text-gray-400 hover:bg-dark-500 hover:text-white"])},b(t),11,Q)):(n(),g("span",X,"..."))],64))),128)),c("button",{disabled:e.currentPage>=e.totalPages,onClick:a[2]||(a[2]=t=>s.$emit("update:page",e.currentPage+1)),class:"px-3 py-2 rounded text-gray-400 hover:bg-dark-500 disabled:opacity-40 disabled:cursor-not-allowed transition-colors","aria-label":"Next page"}," › ",8,Y),c("button",{disabled:e.currentPage>=e.totalPages,onClick:a[3]||(a[3]=t=>s.$emit("update:page",e.totalPages)),class:"px-3 py-2 rounded text-gray-400 hover:bg-dark-500 disabled:opacity-40 disabled:cursor-not-allowed transition-colors","aria-label":"Last page"}," » ",8,Z)]))}}),te={class:"grid grid-cols-1 sm:grid-cols-3 lg:grid-cols-4 gap-6 pt-12"},ae=y({__name:"CharacterList",props:{characters:{},info:{},currentPage:{}},emits:["update:page"],setup(e){return(o,i)=>{const s=H,a=ee;return n(),g("div",null,[c("div",te,[(n(!0),g(x,null,w(e.characters,t=>(n(),h(s,{key:t.id,character:t},null,8,["character"]))),128))]),e.info.pages>1?(n(),h(a,{key:0,"current-page":e.currentPage,"total-pages":e.info.pages,"onUpdate:page":i[0]||(i[0]=t=>o.$emit("update:page",t))},null,8,["current-page","total-pages"])):R("",!0)])}}}),le=y({__name:"index",async setup(e){let o,i;const s=j(),a=z(),{getCharacters:t}=E(),r=f(()=>Number(s.query.page)||1),m=f(()=>s.query.name||""),{data:l,pending:p,error:d}=([o,i]=D(()=>S(()=>`characters-${r.value}-${m.value}`,()=>t(r.value,m.value),{watch:[r,m]})),o=await o,i(),o),k=f(()=>l.value?.results??[]),P=f(()=>l.value?.info??{count:0,pages:0,next:null,prev:null}),C=v=>{a.push({path:"/",query:{...s.query,page:v>1?v:void 0}})};return(v,se)=>{const L=M,_=V,N=ae;return n(),g("div",null,[u(p)?(n(),h(L,{key:0})):u(d)?(n(),h(_,{key:1,message:"Failed to load. Please check your connection and try again."})):u(k).length===0&&u(m)?(n(),h(_,{key:2,message:"No characters found. Try a different search."})):(n(),h(N,{key:3,characters:u(k),info:u(P),"current-page":u(r),"onUpdate:page":C},null,8,["characters","info","current-page"]))])}}});export{le as default};
